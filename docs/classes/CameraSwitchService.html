<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>huddly-sdk</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">huddly-sdk</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li>CameraSwitchService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#readme" role="tab" id="readme-tab" data-toggle="tab" data-link="readme">README</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/components/service/cameraSwitchService.ts</code>
        </p>



            <p class="comment">
                <h3>Implements</h3>
            </p>
            <p class="comment">
                        <code>IHuddlyService</code>
            </p>

            <p class="comment">
                <h3>Example</h3>
            </p>
            <div class="io-description">
            </div>

            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#grpcClient">grpcClient</a>
                            </li>
                            <li>
                                <a href="#options">options</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#allowUserPtz">allowUserPtz</a>
                            </li>
                            <li>
                                <a href="#blokUserPtz">blokUserPtz</a>
                            </li>
                            <li>
                                <a href="#close">close</a>
                            </li>
                            <li>
                                <a href="#getActiveCamera">getActiveCamera</a>
                            </li>
                            <li>
                                <a href="#getAvailableCameras">getAvailableCameras</a>
                            </li>
                            <li>
                                <a href="#getDefaultCamera">getDefaultCamera</a>
                            </li>
                            <li>
                                <a href="#getFwUpdateSchedule">getFwUpdateSchedule</a>
                            </li>
                            <li>
                                <a href="#init">init</a>
                            </li>
                            <li>
                                <a href="#isUserPtzAllowed">isUserPtzAllowed</a>
                            </li>
                            <li>
                                <a href="#scheduleFwUpdate">scheduleFwUpdate</a>
                            </li>
                            <li>
                                <a href="#scheduleFwUpdateAll">scheduleFwUpdateAll</a>
                            </li>
                            <li>
                                <a href="#serviceCameraGetter">serviceCameraGetter</a>
                            </li>
                            <li>
                                <a href="#serviceCameraSetter">serviceCameraSetter</a>
                            </li>
                            <li>
                                <a href="#setActiveCamera">setActiveCamera</a>
                            </li>
                            <li>
                                <a href="#setDefaultCamera">setDefaultCamera</a>
                            </li>
                            <li>
                                <a href="#setFwUpdateSchedule">setFwUpdateSchedule</a>
                            </li>
                            <li>
                                <a href="#setUserPtz">setUserPtz</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(opts?: IServiceOpts)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="63" class="link-to-prism">src/components/service/cameraSwitchService.ts:63</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Creates a new instance of CameraSwitchService and initializes the necessary class attributes</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>opts</td>
                                                  
                                                        <td>
                                                                    <code>IServiceOpts</code>
                                                        </td>
                                                  
                                                    <td>
                                                            Yes
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>? Service options for initializing and setting up the service communication</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="grpcClient"></a>
                        <span class="name">
                            <b>
                            grpcClient</b>
                            <a href="#grpcClient"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>HuddlyCameraServiceClient</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">src/components/service/cameraSwitchService.ts:49</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Service client derived from the proto file</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="options"></a>
                        <span class="name">
                            <b>
                            options</b>
                            <a href="#options"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>IServiceOpts</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="43" class="link-to-prism">src/components/service/cameraSwitchService.ts:43</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Service options for initializing and seting up the service communication</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="allowUserPtz"></a>
                    <span class="name">
                        <b>
                            allowUserPtz
                        </b>
                        <a href="#allowUserPtz"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>allowUserPtz()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="293"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:293</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update the user ptz setting on the huddly camera service to allow user ptz.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Promise</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="blokUserPtz"></a>
                    <span class="name">
                        <b>
                            blokUserPtz
                        </b>
                        <a href="#blokUserPtz"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>blokUserPtz()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="301"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:301</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update the user ptz setting on the huddly camera service to block user ptz.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Promise</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="close"></a>
                    <span class="name">
                        <b>
                            close
                        </b>
                        <a href="#close"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>close()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="603"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:603</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Close grpc connection with the service gprc server.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves if closing the connection is successful or rejects
otherwise.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getActiveCamera"></a>
                    <span class="name">
                        <b>
                            getActiveCamera
                        </b>
                        <a href="#getActiveCamera"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getActiveCamera()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="233"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:233</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get active camera from the huddly camera service.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;CameraInfo&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise which contains data of type <code>CameraInfo</code> detailing the information
about the current active camera on the huddly camera service.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAvailableCameras"></a>
                    <span class="name">
                        <b>
                            getAvailableCameras
                        </b>
                        <a href="#getAvailableCameras"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getAvailableCameras()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="376"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:376</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get a list of all available cameras that have been discovered and are ready to be used on the huddly camera service.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;Array&lt;CameraInfo&gt;&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A list of all available cameras on the service.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDefaultCamera"></a>
                    <span class="name">
                        <b>
                            getDefaultCamera
                        </b>
                        <a href="#getDefaultCamera"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDefaultCamera()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="213"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:213</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get default camera from the huddly camera service.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;CameraInfo&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise which contains data of type <code>CamerInfo</code> detailing the information
about the current default camera on the huddly camera service.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFwUpdateSchedule"></a>
                    <span class="name">
                        <b>
                            getFwUpdateSchedule
                        </b>
                        <a href="#getFwUpdateSchedule"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getFwUpdateSchedule()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="485"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:485</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Retrieve the current configured fw update schedule from the huddly camera service.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;FwUpdateSchedule&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A FwUpdateSchedule object containing all the information about the current fw schedule on the service</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="init"></a>
                    <span class="name">
                        <b>
                            init
                        </b>
                        <a href="#init"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>init()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="78"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:78</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Connect to the service gprc server</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that completes when the init is successful
or rejects if not.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isUserPtzAllowed"></a>
                    <span class="name">
                        <b>
                            isUserPtzAllowed
                        </b>
                        <a href="#isUserPtzAllowed"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>isUserPtzAllowed()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="270"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:270</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Check if the user ptz is allowed on the huddly camera service.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise which after completion it contains information if
user ptz is allowed or not. Rejects if retreiving the setting fails.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="scheduleFwUpdate"></a>
                    <span class="name">
                        <b>
                            scheduleFwUpdate
                        </b>
                        <a href="#scheduleFwUpdate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>scheduleFwUpdate(cameraToUpgrade: CameraInfoWrite)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="519"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:519</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Schedule an immediate firmware upgrade for the given camera on the huddly camera service. Given that the camera is available
on the service.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>cameraToUpgrade</td>
                                    <td>
                                            <code>CameraInfoWrite</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Camera info representing the camera to be upgraded by the service.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;FwUpdateScheduleStatus&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>An object representing the status of the grpc request which contains the message and a list of affected cameras</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="scheduleFwUpdateAll"></a>
                    <span class="name">
                        <b>
                            scheduleFwUpdateAll
                        </b>
                        <a href="#scheduleFwUpdateAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>scheduleFwUpdateAll()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="562"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:562</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Schedule an immediate firmware upgrade on all the cameras available to the huddly camera service.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;FwUpdateScheduleStatus&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>An object representing the status of the grpc request which contains the message and a list of affected cameras</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="serviceCameraGetter"></a>
                    <span class="name">
                        <b>
                            serviceCameraGetter
                        </b>
                        <a href="#serviceCameraGetter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>serviceCameraGetter(action: <a href="../undefineds/ServiceCameraActions.html">ServiceCameraActions</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="159"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:159</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Helper function for calling a getter command on the service grpc server. Using the
parameter &quot;action&quot; to determine which specific getter to invoke.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>action</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#ServiceCameraActions" target="_self" >ServiceCameraActions</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Determine which getter should be called on
the service grpc seerver</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;CameraInfo&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves if the getter execution is successful or rejects
otherwise.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="serviceCameraSetter"></a>
                    <span class="name">
                        <b>
                            serviceCameraSetter
                        </b>
                        <a href="#serviceCameraSetter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>serviceCameraSetter(action: <a href="../undefineds/ServiceCameraActions.html">ServiceCameraActions</a>, camInfo: CameraInfo)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="116"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:116</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Helper function for calling a setter command on the service grpc server. Using the
parameter &quot;action&quot; to determine which specific setter to invoke.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>action</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#ServiceCameraActions" target="_self" >ServiceCameraActions</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Determine which setter should be called on
the service gprc server</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>camInfo</td>
                                    <td>
                                            <code>CameraInfo</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The camera information required to send in as data
when calling the service gprc setter command</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promse that resolves if the setter execution is successful or rejects
otherwise.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setActiveCamera"></a>
                    <span class="name">
                        <b>
                            setActiveCamera
                        </b>
                        <a href="#setActiveCamera"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setActiveCamera(camInfo: CameraInfoWrite)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="224"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:224</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Set active camear on the huddly camera service. Note: this action is not boot persistent.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>camInfo</td>
                                    <td>
                                            <code>CameraInfoWrite</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The camera information reqyuired to send in as data
when setting the activve camera on the service</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves if the active camera is set successfully or rejects
otherwise.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setDefaultCamera"></a>
                    <span class="name">
                        <b>
                            setDefaultCamera
                        </b>
                        <a href="#setDefaultCamera"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setDefaultCamera(camInfo: CameraInfoWrite)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="204"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:204</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Set default camera on the huddly camera service. Note: this action is boot persistent.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>camInfo</td>
                                    <td>
                                            <code>CameraInfoWrite</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The camera information required to send in as data
when setting the default camera on the service</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves if default camera is set successfully or rejects
otherwise.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setFwUpdateSchedule"></a>
                    <span class="name">
                        <b>
                            setFwUpdateSchedule
                        </b>
                        <a href="#setFwUpdateSchedule"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setFwUpdateSchedule(newSchedule: FwUpdateSchedule)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="436"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:436</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Reconfigure firmware update scheduler on the huddly camera service.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>newSchedule</td>
                                    <td>
                                            <code>FwUpdateSchedule</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>New firmware update schedule to be applied to the windows service</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;FwUpdateScheduleStatus&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>An object representing the status of the grpc request which contains the message and a list of affected cameras</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setUserPtz"></a>
                    <span class="name">
                        <b>
                            setUserPtz
                        </b>
                        <a href="#setUserPtz"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setUserPtz(isAllowed: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="246"
                            class="link-to-prism">src/components/service/cameraSwitchService.ts:246</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Set user pan tilt zoom control setting on the huddly camera service. This feature
makes sure you allow or block custom user ptz to the camera comming from third party
applications such as Windows Camera App, Zoom, Meet etc.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>isAllowed</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>A boolean parameter specifying whether the service should
allow or block incoming user ptz actions from third part apps.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves if the setting was changed successfully or rejects
otherwise.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>

    <div class="tab-pane fade " id="c-readme">
        <p><h2 id="huddly-camera-switch-service">Huddly Camera Switch Service</h2>
<p>With version <strong>v0.6.0</strong> we added support for Huddly IP Cameras on the SDK and with that a new feature exclusively on windows. This new feature allows you to switch the stream between different Huddly IP cameras used on various windows streaming applications (ex. windows camera app).</p>
<p>This feature can be useful in a multi-cam scenario where you have more than one Huddly IP camera set up on your meeting room and want to use the sdk to control which camera is used to stream on your zoom, google meet or microsoft teams meeting.</p>
<p>The pre-requisites for using this feature are:</p>
<ul>
<li>Running on windows 10 or above</li>
<li>Having the Huddly IP Camera driver and service up and running on your system</li>
<li>Two or more Huddly IP Camera devices available on your network</li>
</ul>
<h3 id="listing-available-huddly-ip-cameras">Listing available Huddly IP Cameras</h3>
<p>In order to be able to tell the service to switch from one camera to another, you need to be able to list all available cameras on your network and find their corresponding ip addresses. Here is a code snippet that helps you find the list of cameras:</p>
<div><pre class="line-numbers"><code class="language-javascript">const HuddlyDeviceApiIp = require(&#39;&#64;huddly/device-api-ip&#39;).default;
const HuddlyDeviceApiIUsb = require(&#39;&#64;huddly/device-api-usb&#39;).default;
const HuddlySdk = require(&#39;&#64;huddly/sdk&#39;).default;
const { HUDDLY_L1_PID } = require(&#39;&#64;huddly/sdk/lib/src/components/device/factory&#39;).default;

const ipApi = new HuddlyDeviceApiIp();
const usbApi = new HuddlyDeviceApiIUsb();
// Create an instance of the SDK
const sdk = new HuddlySdk([usbApi, ipApi], [usbApi, ipApi]);

const applicationTeardown = () =&gt; {
  process.exit();
}

const searchTime = 30; // seconds
const cameraList = [];

sdk.on(&#39;ATTACH&#39;, (huddlyDevice) =&gt; {
  if (huddlyDevice.pid == HUDDLY_L1_PID) {
    console.log(`Found [${huddlyDevice.productName}] device!`)
    huddlyDevice.getInfo()
    .then(info =&gt; {
      cameraList.push(info)
    })
    .catch((e) =&gt; {
      console.error(`Unable to get camera info from [${huddlyDevice.productName}]`)
      console.trace(e);
    }).finally(_ =&gt; {
      huddlyDevice.closeConnection();
    });
  }
});

setTimeout(() =&gt; {
  console.group(&#39;Camera List&#39;)
  console.log(cameraList)
  console.groupEnd();
  applicationTeardown();
}, searchTime * 1000)
sdk.init();</code></pre></div><p>Running the code snippet above should give you the following result</p>
<div><pre class="line-numbers"><code class="language-shell">Found [Huddly L1] device!
Found [Huddly L1] device!
Camera List
  [
    {
      name: &#39;L1&#39;,
      mac: &#39;90:E2:FC:90:12:EC&#39;,
      ipv4: &#39;169.254.98.175&#39;,
      serialNumber: &#39;12101A0029&#39;,
      modelName: &#39;810-00011-MBLK&#39;,
      manufacturer: &#39;Huddly&#39;,
      productId: 1001,
      version: &#39;1.2.6-4302.12+sha.cc52293&#39;,
      uptime: 22417.75,
      slot: &#39;B&#39;
    },
    {
      name: &#39;L1&#39;,
      mac: &#39;90:E2:FC:90:12:ED&#39;,
      ipv4: &#39;169.254.98.81&#39;,
      serialNumber: &#39;12101A0039&#39;,
      modelName: &#39;810-00011-MWHT&#39;,
      manufacturer: &#39;Huddly&#39;,
      productId: 1001,
      version: &#39;1.2.6-4302.12+sha.cc52293&#39;,
      uptime: 344.75,
      slot: &#39;B&#39;
    }
  ]
</code></pre></div><h3 id="getting-started">Getting started</h3>
<p>Now that you have the information about all the connected Huddly IP cameras on your network, you can use the service to figure out which camera is picked by default by the Huddly IP camera driver, switch to a different camera, set the default camera etc.</p>
<p>The code snipped below will illustrate the camera switch service funcionalities:</p>
<div><pre class="line-numbers"><code class="language-javascript">// Import SDK
const HuddlySdk = require(&#39;&#64;huddly/sdk&#39;).default;

// Get a new camera switch service instance
const cameraSwitchService = await HuddlySdk.getService();

// Get the active camera currently picked by the driver
const activeCameraObj = await cameraSwitchService.getActiveCamera();

// Get the default camera currently set for the driver (can be empty if not set before)
const defaultCameraObj = await cameraSwitchService.getDefaultCamera();

// Switch between different cameras
const huddlyIpCamera1 = {
  name: &quot;L1&quot;,
  ip: &#39;169.254.98.81&#39;
}
const huddlyIpCamera2 = {
  name: &quot;L1&quot;,
  ip: &#39;169.254.98.81&#39;
}

// Switch to camera1
await cameraSwitchService.setActiveCamera(huddlyIpCamera1);

// Switch to camera2
await cameraSwitchService.setActiveCamera(huddlyIpCamera2);

// Make camera2 default pick for the driver (persistent across boot)
await cameraSwitchService.setDefaultCamera(huddlyIpCamera2);</code></pre></div></p>
    </div>

    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import IHuddlyService from &#x27;@huddly/sdk-interfaces/lib/interfaces/IHuddlyService&#x27;;
import IServiceOpts from &#x27;@huddly/sdk-interfaces/lib/interfaces/IServiceOpts&#x27;;
import {
  CameraInfo,
  CameraPairingState,
  FwUpdateSchedule,
  FwUpdateScheduleStatus,
  CameraInfoWrite,
} from &#x27;@huddly/sdk-interfaces/lib/interfaces/ICameraSwitchModels&#x27;;
import Logger from &#x27;@huddly/sdk-interfaces/lib/statics/Logger&#x27;;

import * as switchservice from &#x27;@huddly/camera-switch-proto/lib/api/service_pb&#x27;;
import { HuddlyCameraServiceClient } from &#x27;@huddly/camera-switch-proto/lib/api/service_grpc_pb&#x27;;
import * as grpc from &#x27;@grpc/grpc-js&#x27;;
import { Empty } from &#x27;google-protobuf/google/protobuf/empty_pb&#x27;;

/**
 * Local enum describing service camera actions used to simplify api calls
 * towards the service through GRPC
 */
export enum ServiceCameraActions {
  ACTIVE &#x3D; 0,
  DEFAULT &#x3D; 1,
}

/**
 * @export
 *
 * IHuddlyService class implementation for sdk consumers running on a Windows host machine. The service can be used
 * to switch which huddly network camera is used to stream on the host machine. All the functionality of this
 * service is described in the proto file from @huddly/camera-switch npm package with the name service.proto
 *
 * @class CameraSwitchService
 * @implements {IHuddlyService}
 */
export default class CameraSwitchService implements IHuddlyService {
  /**
   * Service options for initializing and seting up the service communication
   * @type {IServiceOpts}
   * @memberof CameraSwitchService
   */

  options: IServiceOpts;
  /**
   * Service client derived from the proto file
   * @type {HuddlyCameraServiceClient}
   * @memberof CameraSwitchService
   */
  grpcClient: HuddlyCameraServiceClient;

  /**
   * @ignore
   * @type {number}
   * @memberof CameraSwitchService
   */
  private readonly GRPC_DEFAULT_CONNECT_TIMEOUT: number &#x3D; 1; // Seconds

  /**
   * @ignore
   * @type {number}
   * @memberof CameraSwitchService
   */
  private readonly GRPC_PORT: number &#x3D; 30051;

  /**
   * Creates a new instance of CameraSwitchService and initializes the necessary class attributes
   * @param  {IServiceOpts} opts? Service options for initializing and setting up the service communication
   */
  constructor(opts?: IServiceOpts) {
    this.options &#x3D; opts;
  }

  /**
   * Connect to the service gprc server
   * @returns A promise that completes when the init is successful
   * or rejects if not.
   */
  init(): Promise&lt;void&gt; {
    Logger.debug(&#x27;Initializing Windows Ip Camera Service!&#x27;, CameraSwitchService.name);
    const deadline &#x3D; new Date();
    deadline.setSeconds(
      deadline.getSeconds() + (this.options.connectionDeadline || this.GRPC_DEFAULT_CONNECT_TIMEOUT)
    );
    this.grpcClient &#x3D; new HuddlyCameraServiceClient(
      &#x60;localhost:${this.GRPC_PORT}&#x60;,
      this.options.credentials || grpc.credentials.createInsecure()
    );

    return new Promise&lt;void&gt;((resolve, reject) &#x3D;&gt;
      this.grpcClient.waitForReady(deadline, (error) &#x3D;&gt; {
        if (error) {
          Logger.error(
            &#x60;Connection failed with GPRC server on ACE!&#x60;,
            error,
            CameraSwitchService.name
          );
          reject(error);
        } else {
          Logger.debug(&#x60;Connection established&#x60;, CameraSwitchService.name);
          resolve();
        }
      })
    );
  }

  /**
   * Helper function for calling a setter command on the service grpc server. Using the
   * parameter &quot;action&quot; to determine which specific setter to invoke.
   * @param  {ServiceCameraActions} action Determine which setter should be called on
   * the service gprc server
   * @param  {CameraInfo} camInfo The camera information required to send in as data
   * when calling the service gprc setter command
   * @returns A promse that resolves if the setter execution is successful or rejects
   * otherwise.
   */
  serviceCameraSetter(action: ServiceCameraActions, camInfo: CameraInfo): Promise&lt;void&gt; {
    const serviceCamInfo: switchservice.CameraInfoWrite &#x3D; new switchservice.CameraInfoWrite();
    serviceCamInfo.setName(camInfo.name);
    serviceCamInfo.setIp(camInfo.ip);
    const setterActionStr: string &#x3D; Object.keys(ServiceCameraActions).find(
      (key) &#x3D;&gt; ServiceCameraActions[key] &#x3D;&#x3D;&#x3D; action
    );

    return new Promise((resolve, reject) &#x3D;&gt; {
      const setterCallback &#x3D; (err: grpc.ServiceError) &#x3D;&gt; {
        if (err) {
          Logger.error(
            &#x60;Unable to set ${setterActionStr} camera on service. Error: ${err.details}&#x60;,
            err.stack,
            CameraSwitchService.name
          );
          reject(err.details);
          return;
        }
        resolve();
      };

      switch (action) {
        case ServiceCameraActions.ACTIVE:
          this.grpcClient.setActiveCamera(serviceCamInfo, setterCallback);
          break;
        case ServiceCameraActions.DEFAULT:
          this.grpcClient.setDefaultCamera(serviceCamInfo, setterCallback);
          break;
        default:
          throw new Error(&#x60;Unknown service camera action: ${setterActionStr}&#x60;);
      }
    });
  }

  /**
   * Helper function for calling a getter command on the service grpc server. Using the
   * parameter &quot;action&quot; to determine which specific getter to invoke.
   * @param  {ServiceCameraActions} action Determine which getter should be called on
   * the service grpc seerver
   * @returns A promise that resolves if the getter execution is successful or rejects
   * otherwise.
   */
  serviceCameraGetter(action: ServiceCameraActions): Promise&lt;CameraInfo&gt; {
    const getterActionStr: string &#x3D; Object.keys(ServiceCameraActions).find(
      (key) &#x3D;&gt; ServiceCameraActions[key] &#x3D;&#x3D;&#x3D; action
    );
    return new Promise((resolve, reject) &#x3D;&gt; {
      const getterCallback &#x3D; (err: grpc.ServiceError, device: switchservice.CameraInfo) &#x3D;&gt; {
        if (err) {
          Logger.error(
            &#x60;Unable to get ${getterActionStr} camera from service. Error: ${err.details}&#x60;,
            err.stack,
            CameraSwitchService.name
          );
          reject(err.details);
          return;
        }

        resolve({
          ip: device.getIp(),
          name: device.getName(),
          version: device.getVersion(),
          version_state: this.versionStateToString(device),
          pairing_state: this.pairingStateToStringArray(device.getPairingStatesList()),
        });
      };

      switch (action) {
        case ServiceCameraActions.ACTIVE:
          this.grpcClient.getActiveCamera(new Empty(), getterCallback);
          break;
        case ServiceCameraActions.DEFAULT:
          this.grpcClient.getDefaultCamera(new Empty(), getterCallback);
          break;
        default:
          throw new Error(&#x60;Unknown service camera action: ${getterActionStr}&#x60;);
      }
    });
  }

  /**
   * Set default camera on the huddly camera service. Note: this action is boot persistent.
   * @param  {CameraInfo} camInfo The camera information required to send in as data
   * when setting the default camera on the service
   * @returns A promise that resolves if default camera is set successfully or rejects
   * otherwise.
   */
  setDefaultCamera(camInfo: CameraInfoWrite): Promise&lt;void&gt; {
    return this.serviceCameraSetter(ServiceCameraActions.DEFAULT, camInfo);
  }

  /**
   * Get default camera from the huddly camera service.
   * @returns A promise which contains data of type &#x60;CamerInfo&#x60; detailing the information
   * about the current default camera on the huddly camera service.
   */
  getDefaultCamera(): Promise&lt;CameraInfo&gt; {
    return this.serviceCameraGetter(ServiceCameraActions.DEFAULT);
  }

  /**
   * Set active camear on the huddly camera service. Note: this action is not boot persistent.
   * @param  {CameraInfo} camInfo The camera information reqyuired to send in as data
   * when setting the activve camera on the service
   * @returns A promise that resolves if the active camera is set successfully or rejects
   * otherwise.
   */
  setActiveCamera(camInfo: CameraInfoWrite): Promise&lt;void&gt; {
    return this.serviceCameraSetter(ServiceCameraActions.ACTIVE, camInfo);
  }

  /**
   * Get active camera from the huddly camera service.
   * @returns A promise which contains data of type &#x60;CameraInfo&#x60; detailing the information
   * about the current active camera on the huddly camera service.
   */
  getActiveCamera(): Promise&lt;CameraInfo&gt; {
    return this.serviceCameraGetter(ServiceCameraActions.ACTIVE);
  }

  /**
   * Set user pan tilt zoom control setting on the huddly camera service. This feature
   * makes sure you allow or block custom user ptz to the camera comming from third party
   * applications such as Windows Camera App, Zoom, Meet etc.
   * @param  {boolean} isAllowed A boolean parameter specifying whether the service should
   * allow or block incoming user ptz actions from third part apps.
   * @returns A promise that resolves if the setting was changed successfully or rejects
   * otherwise.
   */
  setUserPtz(isAllowed: boolean): Promise&lt;void&gt; {
    const allowed &#x3D; new switchservice.UserPtz();
    allowed.setEnabled(isAllowed);
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.setUserPTZ(allowed, (err: grpc.ServiceError) &#x3D;&gt; {
        if (err) {
          Logger.error(
            &#x60;Unable to set user ptz on service. Error: ${err.details}&#x60;,
            err.stack,
            CameraSwitchService.name
          );
          reject(err.details);
          return;
        }
        resolve();
      });
    });
  }

  /**
   * Check if the user ptz is allowed on the huddly camera service.
   * @returns A promise which after completion it contains information if
   * user ptz is allowed or not. Rejects if retreiving the setting fails.
   */
  isUserPtzAllowed(): Promise&lt;boolean&gt; {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.getUserPTZ(
        new Empty(),
        (err: grpc.ServiceError, isAllowed: switchservice.UserPtz) &#x3D;&gt; {
          if (err) {
            Logger.error(
              &#x60;Unable to get information whether user ptz is allowed or not on the service. Error: ${err.details}&#x60;,
              err.stack,
              CameraSwitchService.name
            );
            reject(err.details);
            return;
          }
          resolve(isAllowed.getEnabled());
        }
      );
    });
  }
  /**
   * Update the user ptz setting on the huddly camera service to allow user ptz.
   * @returns Promise
   */
  allowUserPtz(): Promise&lt;void&gt; {
    return this.setUserPtz(true);
  }

  /**
   * Update the user ptz setting on the huddly camera service to block user ptz.
   * @returns Promise
   */
  blokUserPtz(): Promise&lt;void&gt; {
    return this.setUserPtz(false);
  }

  /**
   * @ignore
   * Helper function for converting CameraPairingState enum values into array of enum keys
   * @param pairingStateList List of proto CameraPairingState values
   * @returns A string array representing the keys for the different Pairing states of the camera
   */
  pairingStateToStringArray(
    pairingStateList: Array&lt;
      switchservice.CameraPairingStateMap[keyof switchservice.CameraPairingStateMap]
    &gt;
  ): Array&lt;string&gt; {
    const pairingStates: Array&lt;string&gt; &#x3D; [];
    pairingStateList.forEach((state) &#x3D;&gt; {
      // Check for unknown pairing states
      if (CameraPairingState[state] &#x3D;&#x3D; undefined) {
        // Check for duplicates
        if (
          !pairingStates.includes(
            CameraPairingState[switchservice.CameraPairingState.UNKNOWNPAIRINGSTATE]
          )
        ) {
          pairingStates.push(CameraPairingState[CameraPairingState.UnknownPairingState]);
        }
      } else {
        // Check for duplicates
        if (!pairingStates.includes(CameraPairingState[state])) {
          pairingStates.push(CameraPairingState[state]);
        }
      }
    });
    return pairingStates;
  }

  /**
   * @ignore
   * Helper function for converting device VersionState into a string representation
   * @param device Service CameraInfo instance used to extract the version state object from
   * @returns A string representation of the device version state
   */
  versionStateToString(device: switchservice.CameraInfo): string {
    return Object.keys(switchservice.VersionState).find(
      (state) &#x3D;&gt; switchservice.VersionState[state] &#x3D;&#x3D; device.getVersionState()
    );
  }

  /**
   * @ignore
   * Helper function for converting list of &#x60;@huddly/camera-switch-proto/CameraInfo&#x60; into local &#x60;CameraInfo&#x60; list representation.
   * @param cameraList List instance of &#x60;@huddly/camera-switch-proto/CameraInfo&#x60; objects to be converted into local &#x60;CameraInfo&#x60; list representation
   * @returns A list of local &#x60;CameraInfo&#x60; objects converted from &#x60;@huddly/camera-switch-proto/CameraInfo&#x60;
   */
  protoCameraInfoListToLocalCameraInfoList(
    cameraList: Array&lt;switchservice.CameraInfo&gt;
  ): Array&lt;CameraInfo&gt; {
    const newConveredCameraList: Array&lt;CameraInfo&gt; &#x3D; new Array&lt;CameraInfo&gt;();
    cameraList.forEach((device) &#x3D;&gt; {
      newConveredCameraList.push({
        ip: device.getIp(),
        name: device.getName(),
        version: device.getVersion(),
        version_state: this.versionStateToString(device),
        pairing_state: this.pairingStateToStringArray(device.getPairingStatesList()),
      });
    });
    return newConveredCameraList;
  }

  /**
   * Get a list of all available cameras that have been discovered and are ready to be used on the huddly camera service.
   * @returns A list of all available cameras on the service.
   */
  getAvailableCameras(): Promise&lt;Array&lt;CameraInfo&gt;&gt; {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.getAvailableCameras(
        new Empty(),
        (err: grpc.ServiceError, availableCameras: switchservice.AvailableCameras) &#x3D;&gt; {
          if (err) {
            Logger.error(
              &#x60;Unable to get available cameras from the service. Error: ${err.details}&#x60;,
              err.stack,
              CameraSwitchService.name
            );
            reject(err.details);
            return;
          }

          const resolveList: Array&lt;CameraInfo&gt; &#x3D; this.protoCameraInfoListToLocalCameraInfoList(
            availableCameras.getCameraListList()
          );
          resolve(resolveList);
        }
      );
    });
  }

  /**
   * @ignore
   * Helper function for converting comma separated camera pairing state keys into proto compatible CameraPairingStateMap used
   * when sending grpc requests to the service grpc server.
   * @param states A comma separated string of CameraPairingState keys
   * @returns A list of CameraPairingState objects represented as &#x60;repeated CameraPairingState&#x60; type on the service proto messages
   */
  pairingStateKeysToValues(
    states: string
  ): Array&lt;switchservice.CameraPairingStateMap[keyof switchservice.CameraPairingStateMap]&gt; {
    const pairStateEnumValues: Array&lt;
      switchservice.CameraPairingStateMap[keyof switchservice.CameraPairingStateMap]
    &gt; &#x3D; [];
    const allowedCameraPairingStates: string[] &#x3D; Object.keys(CameraPairingState).filter(
      (x) &#x3D;&gt; !(parseInt(x) &gt;&#x3D; 0)
    );
    states.split(&#x27;,&#x27;).forEach((state) &#x3D;&gt; {
      if (allowedCameraPairingStates.includes(state)) {
        // Avoid adding duplicates
        if (!pairStateEnumValues.includes(CameraPairingState[state])) {
          pairStateEnumValues.push(CameraPairingState[state]);
        }
      } else {
        throw new Error(
          &#x60;Unknown CameraPairingState [${state}]! Allowed States: ${allowedCameraPairingStates}&#x60;
        );
      }
    });
    return pairStateEnumValues;
  }

  /**
   * Reconfigure firmware update scheduler on the huddly camera service.
   * @param newSchedule New firmware update schedule to be applied to the windows service
   * @returns An object representing the status of the grpc request which contains the message and a list of affected cameras
   */
  setFwUpdateSchedule(newSchedule: FwUpdateSchedule): Promise&lt;FwUpdateScheduleStatus&gt; {
    const request: switchservice.FwUpdateSchedule &#x3D; new switchservice.FwUpdateSchedule();
    request.setDaysOfWeek(newSchedule.daysOfWeek);
    request.setHourOfDay(newSchedule.hour);
    request.setStartDelayMaxSeconds(newSchedule.maxStartDelay);
    request.setValidPairingStatesList(
      this.pairingStateKeysToValues(newSchedule.validPairingStates)
    );
    request.setDisabled(newSchedule.disabled &#x3D;&#x3D; undefined ? false : newSchedule.disabled);

    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.setFwUpdateSchedule(
        request,
        (err: grpc.ServiceError, status: switchservice.FwUpdateScheduleStatus) &#x3D;&gt; {
          if (err) {
            Logger.error(
              &#x60;Unable to set new fw update schedule. Error: ${err.details}&#x60;,
              err.stack,
              CameraSwitchService.name
            );
            reject(err.details);
            return;
          }
          if (status.getCode() !&#x3D; switchservice.FwUpdateScheduleStatusCodes.SUCCESS) {
            Logger.error(
              &#x60;Server reported error when setting new fw update schedule&#x60;,
              undefined,
              CameraSwitchService.name
            );
            reject(status.getMessage());
            return;
          }

          const affectedCameras: Array&lt;CameraInfo&gt; &#x3D; this.protoCameraInfoListToLocalCameraInfoList(
            status.getAffectedCamerasList()
          );
          resolve({
            message: status.getMessage(),
            affectedCameras,
          });
        }
      );
    });
  }

  /**
   * Retrieve the current configured fw update schedule from the huddly camera service.
   * @returns A FwUpdateSchedule object containing all the information about the current fw schedule on the service
   */
  getFwUpdateSchedule(): Promise&lt;FwUpdateSchedule&gt; {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.getFwUpdateSchedule(
        new Empty(),
        (err: grpc.ServiceError, schedule: switchservice.FwUpdateSchedule) &#x3D;&gt; {
          if (err) {
            Logger.error(
              &#x60;Unable to retrieve fw update schedule. Error: ${err.details}&#x60;,
              err.stack,
              CameraSwitchService.name
            );
            reject(err.details);
            return;
          }
          resolve({
            daysOfWeek: schedule.getDaysOfWeek(),
            validPairingStates: this.pairingStateToStringArray(
              schedule.getValidPairingStatesList()
            ).join(&#x27;,&#x27;),
            disabled: schedule.getDisabled(),
            hour: schedule.getHourOfDay(),
            maxStartDelay: schedule.getStartDelayMaxSeconds(),
          });
        }
      );
    });
  }

  /**
   * Schedule an immediate firmware upgrade for the given camera on the huddly camera service. Given that the camera is available
   * on the service.
   * @param cameraToUpgrade Camera info representing the camera to be upgraded by the service.
   * @returns An object representing the status of the grpc request which contains the message and a list of affected cameras
   */
  scheduleFwUpdate(cameraToUpgrade: CameraInfoWrite): Promise&lt;FwUpdateScheduleStatus&gt; {
    const request: switchservice.CameraInfoWrite &#x3D; new switchservice.CameraInfoWrite();
    request.setIp(cameraToUpgrade.ip);
    request.setName(cameraToUpgrade.name);
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.scheduleFwUpdate(
        request,
        (err: grpc.ServiceError, status: switchservice.FwUpdateScheduleStatus) &#x3D;&gt; {
          if (err) {
            Logger.error(
              &#x60;Unable to schedule upgrade for camera (Ip: ${cameraToUpgrade.ip}, Name: ${cameraToUpgrade.name})&#x60;,
              err.stack,
              CameraSwitchService.name
            );
            reject(err.details);
            return;
          }
          if (status.getCode() !&#x3D; switchservice.FwUpdateScheduleStatusCodes.SUCCESS) {
            Logger.error(
              &#x60;Unable to schedule upgrade for camera (Ip: ${cameraToUpgrade.ip}, Name: ${cameraToUpgrade.name})&#x60;,
              undefined,
              CameraSwitchService.name
            );
            reject(status.getMessage());
            return;
          }

          const affectedCameras: Array&lt;CameraInfo&gt; &#x3D; this.protoCameraInfoListToLocalCameraInfoList(
            status.getAffectedCamerasList()
          );
          resolve({
            message: status.getMessage(),
            affectedCameras,
          });
        }
      );
    });
  }

  /**
   * Schedule an immediate firmware upgrade on all the cameras available to the huddly camera service.
   * @returns An object representing the status of the grpc request which contains the message and a list of affected cameras
   */
  scheduleFwUpdateAll(): Promise&lt;FwUpdateScheduleStatus&gt; {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.grpcClient.scheduleFwUpdateAll(
        new Empty(),
        (err: grpc.ServiceError, status: switchservice.FwUpdateScheduleStatus) &#x3D;&gt; {
          if (err) {
            Logger.error(
              &#x60;Unable to schedule fw update on all connected cameras! Error: ${err.details}&#x60;,
              err.stack,
              CameraSwitchService.name
            );
            reject(err.details);
            return;
          }
          if (status.getCode() !&#x3D; switchservice.FwUpdateScheduleStatusCodes.SUCCESS) {
            Logger.error(
              &#x27;Unable to schedule fw update on all connected cameras!&#x27;,
              undefined,
              CameraSwitchService.name
            );
            reject(status.getMessage());
            return;
          }

          const affectedCameras: Array&lt;CameraInfo&gt; &#x3D; this.protoCameraInfoListToLocalCameraInfoList(
            status.getAffectedCamerasList()
          );
          resolve({
            message: status.getMessage(),
            affectedCameras,
          });
        }
      );
    });
  }

  /**
   * Close grpc connection with the service gprc server.
   * @returns A promise that resolves if closing the connection is successful or rejects
   * otherwise.
   */
  close(): Promise&lt;void&gt; {
    if (this.grpcClient) {
      this.grpcClient.close();
      this.grpcClient &#x3D; undefined;
    }
    return Promise.resolve();
  }
}
</code></pre>
    </div>
</div>



                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'CameraSwitchService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
